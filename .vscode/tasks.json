{
  // See https://go.microsoft.com/fwlink/?LinkId=733558
  // for the documentation about the tasks.json format
  "version": "2.0.0",
  "windows": {
    "options": {
      "shell": {
        "executable": "cmd.exe",
        "args": [
          "/d",
          "/c"
        ]
      },
      "env": {
        "CMakeGenerator": "Visual Studio 15 2017",
        "BuildFolder": "${workspaceFolder}/build/windows/",
        "X64Dir": "x64",
        "X32Dir": "x32",
        "DebugDir": "debug",
        "ReleaseDir": "release",
        "OutDir": "bin"
      }
    },
    "presentation": {
      "reveal": "always",
      "panel": "new",
      "focus": true
    },
    "problemMatcher": [
      "$msCompile"
    ]
  },
  "linux": {
    "options": {
      "shell": {
        "executable": "sh",
        "args": [
          "-c"
        ]
      },
      "env": {
        "CMakeGenerator": "Unix Makefiles",
        "BuildFolder": "${workspaceFolder}/build/linux/",
        "X64Dir": "x64",
        "X32Dir": "x32",
        "DebugDir": "debug",
        "ReleaseDir": "release",
        "OutDir": "bin"
      }
    },
    "presentation": {
      "reveal": "always",
      "panel": "new",
      "focus": true
    },
    "problemMatcher": [
      "$gcc"
    ]
  },
  "tasks": [
    {
      "label": "configure-debug-x64",
      "type": "shell",
      "command": "cmake -G \"${CMakeGenerator}\" -DCMAKE_BUILD_TYPE=Debug -H. -Ax64 -B${BuildFolder}/${X64Dir}/${DebugDir}",
      "windows": {
        "command": "cmake -G \"${CMakeGenerator}\" -DCMAKE_BUILD_TYPE=Debug -H. -Ax64 -B%BuildFolder%/%X64Dir%/%DebugDir%"
      },
      "group": "build"
    },
    {
      "label": "build-debug-x64",
      "type": "shell",
      "command": "cmake --build ${BuildFolder}/${X64Dir}/${DebugDir}",
      "windows": {
        "command": "cmake --build %BuildFolder%/%X64Dir%/%DebugDir%"
      },
      "group": "build"
    },
    {
      "label": "configure-relWithDebugInfo-x64",
      "type": "shell",
      "command": "cmake -G \"${CMakeGenerator}\" -DCMAKE_BUILD_TYPE=RelWithDebugInfo -H. -Ax64 -B${BuildFolder}/${X64Dir}/${ReleaseDir}",
      "windows": {
        "command": "cmake -G \"${CMakeGenerator}\" -DCMAKE_BUILD_TYPE=RelWithDebugInfo -H. -Ax64 -B%BuildFolder%/%X64Dir%/%ReleaseDir%"
      },
      "group": "build"
    },
    {
      "label": "build-relWithDebugInfo-x64",
      "type": "shell",
      "command": "cmake --build ${BuildFolder}/${X64Dir}/${ReleaseDir}",
      "windows": {
        "command": "cmake --build %BuildFolder%/%X64Dir%/%ReleaseDir%",
      },
      "group": "build",
    },
    {
      "label": "docker-init-container",
      "type": "shell",
      "options": {
        "shell": {
          "executable": "/usr/bin/pwsh",
          "args": [
            "-NoProfile",
            "-Command"
          ]
        }
      },
      "command": "cmake -G \"${CMakeGenerator}\" -DCMAKE_BUILD_TYPE=RelWithDebugInfo -H. -Ax64 -B${BuildFolder}/${X64Dir}/${ReleaseDir}",
      "windows": {
        "options": {
          "shell": {
            "executable": "powershell.exe",
            "args": [
              "-NoProfile",
              "-ExecutionPolicy",
              "Bypass",
              "-Command"
            ]
          },
          "env": {
            "BuildFolder": "${workspaceFolder}/build/windows/",
            "X64Dir": "x64",
            "X32Dir": "x32",
            "DebugDir": "debug",
            "ReleaseDir": "release",
            "OutDir": "bin"
          }
        },
        "command": "cmake -G \"${CMakeGenerator}\" -DCMAKE_BUILD_TYPE=RelWithDebugInfo -H. -Ax64 -B%BuildFolder%/%X64Dir%/%ReleaseDir%"
      },
      "group": "build"
    },
  ],
}